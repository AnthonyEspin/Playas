{% extends './plantilla.html' %}
{% block contenido %}
<br><br>
<div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-6 bg-light">
        <h1>Editar Playa</h1>
        <form id="frm_editar_playa" action="/procesarEdicionPlaya" method="POST" enctype="multipart/form-data"> 
            {% csrf_token %}
            <input type="hidden" name="id" value="{{ playa.id }}">

            <label for="nombre">Nombre:</label><br>
            <input class="form-control" type="text" name="nombre" id="nombre" value="{{ playa.nombre }}"> <br><br>

            <label for="ubicacion">Ubicación:</label><br>
            <input class="form-control" type="text" name="ubicacion" id="ubicacion" value="{{ playa.ubicacion }}"> <br><br>

            <label for="descripcion">Descripción:</label><br>
            <textarea class="form-control" name="descripcion" id="descripcion" rows="5">{{ playa.descripcion }}</textarea> <br><br>
            <br><br>

            <button class="btn btn-warning" type="submit">
                <i class="fa fa-pen"></i> Editar
            </button>

            <a class="btn btn-outline-danger" href="/playas">
                <i class="fa fa-times"></i> Cancelar
            </a>
        </form>
        <br>
    </div>
</div>
<br>
<!-- Configuración del input de archivos -->
<script>
    $("#imagen").fileinput({
        previewFileType: 'image',
        browseLabel: "Examinar",
        showUpload: false,
        showCancel: false,
        showRemove: true,
        allowedFileExtensions: ["jpg", "png", "jpeg"],
        initialPreviewAsData: true,
        theme: 'fa5',
        language: 'es'
    });
</script>

<!-- Validación con jQuery -->
<script>
    $("#frm_editar_playa").validate({
        rules:{
            "nombre":{
                required:true,
                minlength:3,
                maxlength:100
            },
            "ubicacion":{
                required:true,
                minlength:3,
                maxlength:150
            },
            "descripcion":{
                required:true,
                minlength:5
            },
            "imagen": {
                extension: "jpg|jpeg|png"
            }
        },
        messages:{
            "nombre":{
                required:"Este campo es obligatorio",
                minlength:"Debe tener al menos 3 caracteres",
                maxlength:"No puede superar los 100 caracteres"
            },
            "ubicacion":{
                required:"Este campo es obligatorio",
                minlength:"Debe tener al menos 3 caracteres",
                maxlength:"No puede superar los 150 caracteres"
            },
            "descripcion":{
                required:"Este campo es obligatorio",
                minlength:"Debe tener al menos 5 caracteres"
            },
            "imagen": {
                extension: "Solo se permiten imágenes jpg, jpeg o png"
            }
        }
    });
</script>
{% endblock %}
